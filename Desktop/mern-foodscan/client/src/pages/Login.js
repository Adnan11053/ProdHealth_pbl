import React, {useState} from 'react'; import { Link, useNavigate } from 'react-router-dom'; import api from '../api';
export default function Login(){ const [email,setEmail]=useState(''); const [password,setPassword]=useState(''); const nav = useNavigate();
const submit = async (e)=>{ e.preventDefault(); try{ const {data} = await api.post('/api/auth/login',{email,password}); localStorage.setItem('token',data.token); localStorage.setItem('email',data.email); if(data.name) localStorage.setItem('name',data.name); if(data.preferences) localStorage.setItem('prefs_request', JSON.stringify(data.preferences)); nav('/'); }catch(err){ alert(err?.response?.data?.msg || 'Login error'); } };
return (<div className="max-w-md mx-auto mt-12"><div className="bg-white rounded-2xl p-8 shadow text-center"><div className="bg-teal-500 text-white rounded-full w-14 h-14 flex items-center justify-center text-2xl mx-auto mb-2">ðŸ‘¤</div><h2 className="text-2xl font-bold text-teal-700 mb-2">Welcome Back</h2><p className="text-gray-500 mb-6">Sign in to continue scanning</p><form onSubmit={submit}><label>Email Address</label><input className="w-full mt-1 mb-4 px-3 py-2 border rounded-md" value={email} onChange={e=>setEmail(e.target.value)} /><label>Password</label><input type="password" className="w-full mt-1 mb-4 px-3 py-2 border rounded-md" value={password} onChange={e=>setPassword(e.target.value)} /><button className="w-full bg-teal-700 text-white py-2 rounded-md">Sign In</button></form><p className="mt-4 text-center">Don't have an account? <Link to="/signup">Sign up</Link></p></div></div>); }
